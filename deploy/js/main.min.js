function supports_canvas(){return!!document.createElement("canvas").getContext}function setBrickText(){var a=0;$(".inner li").each(function(){lis[a]=$(this).html(),a++}),texto=makeMatrix(lis)}function initbricks(){for(BRICKS%2===0?BRICKS/5===2?NCOLS=5:NCOLS=6:NCOLS=4,NROWS=Math.ceil(BRICKS/NCOLS)+1,numBricks=BRICKS,setBrickText(),BRICKWIDTH=WIDTH/NCOLS-10,BRICKHEIGHT=35,PADDING=8,left=BRICKS,bricks=new Array(NROWS),i=0;i<NROWS;i++)for(bricks[i]=new Array(NCOLS),j=0;j<NCOLS;j++)numBricks>0?(bricks[i][j]=1,numBricks--):bricks[i][j]=0}function startGame(){canvas.removeEventListener("click",startGame,!1),$(".coolView").hide(),init(),initbricks(),loadPlayer(),loadMouse(),playedOnce=!0,$(document).keydown(onKeyDown),$(document).keyup(onKeyUp),dy=-dy}function init(){return ctx=$("#canvas")[0].getContext("2d"),intervalId=setInterval(draw,fps)}function endGame(){clearInterval(intervalId),isPlaying=!1,left=0,x=resetX,y=resetY,playedOnce&&(showOptions(),playedOnce=!1),$(".coolView").show(),canvas.addEventListener("click",startGame,!1)}function loadPlayer(){paddleh=10,paddlew=150,paddlex=Math.floor(WIDTH/2),paddley=HEIGHT-paddleh}function loadMouse(){canvasMinX=$("#canvas").offset().left,canvasMaxX=canvasMinX+WIDTH}function onMouseMove(a){a.pageX>canvasMinX&&a.pageX<canvasMaxX&&(paddlex>0||canvasMaxX-paddlew>paddlex)&&(paddlex=a.pageX-canvasMinX-75)}function makeBall(a,b,c){ctx.fillStyle="rgba(0,0,0,.75)",ctx.beginPath(),ctx.arc(a,b,c,0,2*Math.PI,!0),ctx.closePath(),ctx.fill()}function rect(a,b,c,d){ctx.fillStyle="rgba(0,0,0,.75)",ctx.beginPath(),ctx.rect(a,b,c,d),ctx.closePath(),ctx.fill()}function showOptions(){ctx.fillStyle="rgba(0,0,0,.75)",ctx.font=" 80% Cantata One",ctx.fillText("Built from scratch... :)",WIDTH/3,HEIGHT-140),ctx.fillStyle="rgba(0,0,0,.75)",ctx.font=" 80% Cantata One",ctx.fillText("Click to play again",WIDTH/2,HEIGHT-90)}function roundRect(a,b,c,d,e){var f=5;ctx.beginPath(),ctx.fillStyle="rgba(0,0,0,.75)",ctx.moveTo(a+f,b),ctx.lineTo(a+c-f,b),ctx.quadraticCurveTo(a+c,b,a+c,b+f),ctx.lineTo(a+c,b+d-f),ctx.quadraticCurveTo(a+c,b+d,a+c-f,b+d),ctx.lineTo(a+f,b+d),ctx.quadraticCurveTo(a,b+d,a,b+d-f),ctx.lineTo(a,b+f),ctx.quadraticCurveTo(a,b,a+f,b),ctx.closePath(),ctx.fill(),e&&(ctx.fillStyle="#FFF",ctx.font=" 80% Cantata One",ctx.fillText(e,a+10,b+20))}function clear(){ctx.clearRect(0,0,WIDTH,HEIGHT)}function paddleKeyMov(){rightDown&&WIDTH-paddlew>paddlex?paddlex+=5:leftDown&&paddlex>0&&(paddlex-=5),paddleHalfPos=paddlex+75,rect(paddlex,paddley,paddlew,paddleh)}function makeMatrix(a){var b=new Array(NROWS),c=0;for(i=0;i<NROWS;i++)for(b[i]=new Array(NCOLS),j=0;j<NCOLS;j++)a[c]?b[i][j]=a[c]:b[i][j]=0,c++;return b}function draw(){for(clear(),makeBall(x,y,10),paddleKeyMov(),0>y+dy&&(dy=-dy),i=0;i<NROWS;i++)for(j=0;j<NCOLS;j++)1===bricks[i][j]&&roundRect(j*(BRICKWIDTH+PADDING)+PADDING,i*(BRICKHEIGHT+PADDING)+PADDING,BRICKWIDTH,BRICKHEIGHT,texto[i][j]);rowheight=BRICKHEIGHT+PADDING,colwidth=BRICKWIDTH+PADDING,row=Math.floor(y/rowheight),col=Math.floor(x/colwidth),y<NROWS*rowheight&&row>=0&&col>=0&&1===bricks[row][col]&&(dy=-dy,bricks[row][col]=0,left--,0>=left&&(clear(),endGame())),x+dx>WIDTH||0>x+dx?dx=-dx:y+5>paddley&&(x>paddlex&&paddlex+150>x?(dy=-dy,paddlex+75>x+5&&dx>0&&(dx=-dx),x+5>paddlex+75&&0>dx&&(dx=-dx)):endGame()),x+=dx,y+=dy}function onKeyDown(a){39===a.keyCode?rightDown=!0:37===a.keyCode&&(leftDown=!0)}function onKeyUp(a){39===a.keyCode?rightDown=!1:37===a.keyCode&&(leftDown=!1)}function toggleCoolView(){cool?(cool=!1,$(this).text(coolLabel),endGame(),$("#canvas").hide(),$(".outer").hide(),$(".inner").show()):(cool=!0,$(this).text(boringLabel),$(".inner").hide(),$(".outer").show(),WIDTH=$(".outer section").width()-100,HEIGHT=$(".outer section").height(),x=WIDTH/2,resetX=WIDTH/2,$("#canvas").show(),$(".coolView").show(),canvas=document.getElementById("canvas"),$("#canvas").attr({width:WIDTH,height:HEIGHT}),canvas.addEventListener("click",startGame,!1))}var BRICKS=0,numBricks,show,cool=!1,coolLabel="Fun Again",boringLabel="Boss is Back!",moreMsg="more",lessMsg="less",texto=new Array($("li").length),lis=new Array($("li").length),textoMat,WIDTH,HEIGHT,resetX=10,resetY=400,x=10,y=resetY,dx=3,dy=-3,ctx,left,fps=10,paddlex,paddleh,paddlew,paddleHalfPos,intervalId=0,borderRadius=4,rightDown=!1,leftDown=!1,canvas,canvasMinX,canvasMaxX,playedOnce=!1;$(document).mousemove(onMouseMove);